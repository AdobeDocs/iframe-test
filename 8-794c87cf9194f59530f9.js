"use strict";(self.webpackChunkdev_site_documentation_template=self.webpackChunkdev_site_documentation_template||[]).push([[8],{96008:function(e,n,o){o.r(n),o.d(n,{default:function(){return M}});var t,r,c,i,s,a=o(15007),l=o(1597),d=o(95223);!function(e){e.Call="call",e.Reply="reply",e.Syn="syn",e.SynAck="synAck",e.Ack="ack"}(t||(t={})),function(e){e.Fulfilled="fulfilled",e.Rejected="rejected"}(r||(r={})),function(e){e.ConnectionDestroyed="ConnectionDestroyed",e.ConnectionTimeout="ConnectionTimeout",e.NoIframeSrc="NoIframeSrc"}(c||(c={})),function(e){e.DataCloneError="DataCloneError"}(i||(i={})),function(e){e.Message="message"}(s||(s={}));const u={"http:":"80","https:":"443"},g=/^(https?:)?\/\/([^/:]+)?(:(\d+))?/,m=["file:","data:"];const f=e=>{let{name:n,message:o,stack:t}=e;return{name:n,message:o,stack:t}};let h=0;var p=()=>++h;const v=e=>e?e.split("."):[],w=(e,n,o)=>{const t=v(n);return t.reduce(((e,n,r)=>(void 0===e[n]&&(e[n]={}),r===t.length-1&&(e[n]=o),e[n])),e),e},y=(e,n)=>{const o={};return Object.keys(e).forEach((t=>{const r=e[t],c=((e,n)=>{const o=v(n||"");return o.push(e),(e=>e.join("."))(o)})(t,n);"object"==typeof r&&Object.assign(o,y(r,c)),"function"==typeof r&&(o[c]=r)})),o};var S=(e,n,o,i,a)=>{const{localName:l,local:d,remote:u,originForSending:g,originForReceiving:m}=n;let f=!1;a("".concat(l,": Connecting call sender"));const h=e=>function(){for(var n=arguments.length,o=new Array(n),h=0;h<n;h++)o[h]=arguments[h];let v;a("".concat(l,": Sending ").concat(e,"() call"));try{u.closed&&(v=!0)}catch(w){v=!0}if(v&&i(),f){const n=new Error("Unable to send ".concat(e,"() call due ")+"to destroyed connection");throw n.code=c.ConnectionDestroyed,n}return new Promise(((n,c)=>{const i=p(),f=o=>{if(o.source!==u||o.data.penpal!==t.Reply||o.data.id!==i)return;if("*"!==m&&o.origin!==m)return void a("".concat(l," received message from origin ").concat(o.origin," which did not match expected origin ").concat(m));const g=o.data;a("".concat(l,": Received ").concat(e,"() reply")),d.removeEventListener(s.Message,f);let h=g.returnValue;g.returnValueIsError&&(h=(e=>{const n=new Error;return Object.keys(e).forEach((o=>n[o]=e[o])),n})(h)),(g.resolution===r.Fulfilled?n:c)(h)};d.addEventListener(s.Message,f);const h={penpal:t.Call,id:i,methodName:e,args:o};u.postMessage(h,g)}))},v=o.reduce(((e,n)=>(e[n]=h(n),e)),{});return Object.assign(e,(e=>{const n={};for(const o in e)w(n,o,e[o]);return n})(v)),()=>{f=!0}},k=(e,n,o,c,a)=>{const{destroy:l,onDestroy:d}=c;let u,g;const m={};return c=>{if("*"!==n&&c.origin!==n)return void a("Parent: Handshake - Received ACK message from origin ".concat(c.origin," which did not match expected origin ").concat(n));a("Parent: Handshake - Received ACK");const h={localName:"Parent",local:window,remote:c.source,originForSending:o,originForReceiving:n};u&&u(),u=((e,n,o)=>{const{localName:c,local:a,remote:l,originForSending:d,originForReceiving:u}=e;let g=!1;const m=e=>{if(e.source!==l||e.data.penpal!==t.Call)return;if("*"!==u&&e.origin!==u)return void o("".concat(c," received message from origin ").concat(e.origin," which did not match expected origin ").concat(u));const s=e.data,{methodName:a,args:m,id:h}=s;o("".concat(c,": Received ").concat(a,"() call"));const p=e=>n=>{if(o("".concat(c,": Sending ").concat(a,"() reply")),g)return void o("".concat(c,": Unable to send ").concat(a,"() reply due to destroyed connection"));const s={penpal:t.Reply,id:h,resolution:e,returnValue:n};e===r.Rejected&&n instanceof Error&&(s.returnValue=f(n),s.returnValueIsError=!0);try{l.postMessage(s,d)}catch(u){if(u.name===i.DataCloneError){const e={penpal:t.Reply,id:h,resolution:r.Rejected,returnValue:f(u),returnValueIsError:!0};l.postMessage(e,d)}throw u}};new Promise((e=>e(n[a].apply(n,m)))).then(p(r.Fulfilled),p(r.Rejected))};return a.addEventListener(s.Message,m),()=>{g=!0,a.removeEventListener(s.Message,m)}})(h,e,a),d(u),g&&g.forEach((e=>{delete m[e]})),g=c.data.methodNames;const p=S(m,h,g,l,a);return d(p),m}};var E=e=>{let{iframe:n,methods:o={},childOrigin:r,timeout:i,debug:a=!1}=e;const l=(e=>function(){if(e){for(var n=arguments.length,o=new Array(n),t=0;t<n;t++)o[t]=arguments[t];console.log("[Penpal]",...o)}})(a),d=((e,n)=>{const o=[];let t=!1;return{destroy(r){t||(t=!0,n("".concat(e,": Destroying connection")),o.forEach((e=>{e(r)})))},onDestroy(e){t?e():o.push(e)}}})("Parent",l),{onDestroy:f,destroy:h}=d;r||((e=>{if(!e.src&&!e.srcdoc){const e=new Error("Iframe must have src or srcdoc property defined.");throw e.code=c.NoIframeSrc,e}})(n),r=(e=>{if(e&&m.find((n=>e.startsWith(n))))return"null";const n=document.location,o=g.exec(e);let t,r,c;o?(t=o[1]?o[1]:n.protocol,r=o[2],c=o[4]):(t=n.protocol,r=n.hostname,c=n.port);const i=c&&c!==u[t]?":".concat(c):"";return"".concat(t,"//").concat(r).concat(i)})(n.src));const p="null"===r?"*":r,v=y(o),w=((e,n,o,r)=>c=>{if(!c.source)return;if("*"!==o&&c.origin!==o)return void e("Parent: Handshake - Received SYN message from origin ".concat(c.origin," which did not match expected origin ").concat(o));e("Parent: Handshake - Received SYN, responding with SYN-ACK");const i={penpal:t.SynAck,methodNames:Object.keys(n)};c.source.postMessage(i,r)})(l,v,r,p),S=k(v,r,p,d,l),E=new Promise(((e,o)=>{const r=((e,n)=>{let o;return void 0!==e&&(o=window.setTimeout((()=>{const o=new Error("Connection timed out after ".concat(e,"ms"));o.code=c.ConnectionTimeout,n(o)}),e)),()=>{clearTimeout(o)}})(i,h),a=o=>{if(o.source===n.contentWindow&&o.data)if(o.data.penpal!==t.Syn)if(o.data.penpal!==t.Ack);else{const n=S(o);n&&(r(),e(n))}else w(o)};window.addEventListener(s.Message,a),l("Parent: Awaiting handshake"),((e,n)=>{const{destroy:o,onDestroy:t}=n,r=setInterval((()=>{e.isConnected||(clearInterval(r),o())}),6e4);t((()=>{clearInterval(r)}))})(n,d),f((e=>{window.removeEventListener(s.Message,a),e&&o(e)}))}));return{promise:E,destroy(){h()}}};var I=o(42075),C=o(26777),R=o(158);var M=e=>{let{src:n,height:o="calc(100vh - var(--spectrum-global-dimension-size-800))",location:t}=e;const r=(0,a.useRef)(null),{ims:c,isLoadingIms:i}=(0,a.useContext)(C.Z),{0:s,1:u}=(0,a.useState)(null),{0:g,1:m}=(0,a.useState)(!1);(0,a.useEffect)((()=>{s&&(0===r.current.clientHeight?s.onHide():s.onShow())}),[t.pathname]),(0,a.useEffect)((()=>{if(m(!1),null!=r&&!i){const e=h();return()=>{e.destroy()}}}),[r,i]);const f=(0,R.Bm)(n)?n:(0,l.dq)(n),h=()=>{const e=E({iframe:r.current,childOrigin:(0,R.Bm)(n)?new URL(n).origin:window.origin,methods:{scrollTop(e){var n;void 0===e&&(e=0),null!==(n=document)&&void 0!==n&&n.scrollingElement&&(document.scrollingElement.scrollTop=e)},getURL(){var e,n;return null===(e=window)||void 0===e||null===(n=e.location)||void 0===n?void 0:n.href},setURL(e){var n;null!==(n=window)&&void 0!==n&&n.location&&(window.location=e)},setHeight(e){r.current.style.height=e},getIMSAccessToken(){console.log(),console.log("==========================="),console.log("wat");new Date;return console.log("getIMSAccessToken"),window.adobeIMS&&console.log(window.adobeIMS.getAccessToken()),console.log("==========================="),c?c.getAccessToken():null},getIMSProfile(){let e=new Date;return console.log("getProfile"),console.log(e.toLocaleString()),console.log(c),console.log(c.getProfile()),c?c.getProfile():null},signIn(){c&&!c.isSignedInUser()&&c.signIn()},signOut(){c&&c.isSignedInUser()&&c.signOut()},getIMSClientId(){return c?c.adobeIdData.client_id:null}}});return e.promise.then((e=>{0===r.current.clientHeight?e.onHide():e.onShow(),u(e)})),m(!0),e};return(0,d.tZ)(a.default.Fragment,null,(0,d.tZ)("iframe",{title:"Main content",ref:r,src:g?f:"",css:(0,d.iv)("display:block;height:",o,";width:100%;border:none;","")}),(0,d.tZ)(I.$,null))}}}]);
//# sourceMappingURL=8-794c87cf9194f59530f9.js.map